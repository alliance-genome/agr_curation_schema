id: https://github.com/alliance-genome/agr_curation_schema/balancer
name: alliance-schema-balancer
title: Alliance Schema Balancer Extension
description: >-
  LinkML schema extension for balancer chromosome support in the
  Alliance of Genome Resources (AGR) schema. This extension implements
  enhanced biological modeling for Drosophila balancer chromosomes.

version: 1.3.0
default_prefix: alliance
default_range: string

imports:
  - core
  - allele
  - linkml:types

prefixes:
  alliance: https://github.com/alliance-genome/agr_curation_schema/
  linkml: https://w3id.org/linkml/
  SO: http://purl.obolibrary.org/obo/SO_
  GENO: http://purl.obolibrary.org/obo/GENO_
  PATO: http://purl.obolibrary.org/obo/PATO_
  biolink: https://w3id.org/biolink/vocab/

slots:
  # BalancerChromosome slots
  represents_allele:
    domain: BalancerChromosome
    range: uriorcurie
    description: >-
      Back-pointer to the canonical Allele entity for this balancer.
      Maintains compatibility with existing AGR data integration.
    multivalued: false
    required: false
    examples:
      - value: "FB:FBal0016059"
        description: "TM6B allele represented by this balancer chromosome"

  chromosome:
    domain: BalancerChromosome
    range: uriorcurie
    description: >-
      Points to core Chromosome entity that this balancer affects.
      Essential for biological context and validation.
    multivalued: false
    required: true
    examples:
      - value: "FB:FBch0003081"
        description: "Chromosome 3 for TM6B balancer"

  has_breakpoints:
    domain: BalancerChromosome
    range: Breakpoint
    multivalued: true
    description: >-
      Collection of structured chromosomal breakpoints defining this 
      balancer's rearrangement pattern. Enables precise biological modeling.
    required: false
    examples:
      - value: "FB:FBal0016059_brk1"
        description: "First breakpoint of TM6B balancer"

  suppressed_regions:
    domain: BalancerChromosome
    range: SuppressedRegion
    multivalued: true
    description: >-
      Regions where recombination is suppressed by this balancer.
      Many balancers only suppress distal regions, not entire arms.
    required: false
    examples:
      - value: "FB:FBal0016059_supp1"
        description: "Distal suppression region of TM6B"

  homozygous_viability:
    domain: BalancerChromosome
    range: ViabilityEnum
    description: >-
      Viability of homozygous individuals. Essential for stock centers
      and genetic planning in breeding programs.
    required: false
    default: UNKNOWN
    examples:
      - value: "LETHAL"
        description: "TM6B is lethal when homozygous"

  viability_condition:
    domain: BalancerChromosome
    range: string
    description: >-
      Environmental conditions affecting viability (temperature, stage, etc.)
    required: false
    examples:
      - value: "lethal at 25°C, viable at 18°C"
        description: "Temperature-sensitive viability condition"

  balancer_status:
    domain: BalancerChromosome
    range: BalancerStatus
    description: >-
      Balancer classification status with provenance capability.
      Enables reasoning and compositionality beyond simple boolean flags.
    required: false
    default: UNKNOWN
    examples:
      - value: "BALANCER"
        description: "TM6B is confirmed balancer chromosome"

  # Breakpoint slots  
  cytological_band:
    domain: Breakpoint
    range: string
    description: >-
      Cytological band location using standard Drosophila nomenclature.
    pattern: "^[0-9XY]+[LR]?:[0-9]+[A-Z](?:\\.[0-9]+)?$"
    examples:
      - value: "3L:61A1"
        description: "Cytological location of TM6B breakpoint"

  orientation:
    domain: Breakpoint
    range: OrientationEnum
    description: >-
      Chromosomal orientation at this breakpoint for accurate inversion modeling.
    required: false
    default: UNKNOWN
    examples:
      - value: "REVERSE"
        description: "Inverted orientation at breakpoint"

  breakpoint_type:
    domain: Breakpoint
    range: BreakpointTypeEnum
    description: >-
      Type of chromosomal rearrangement at this breakpoint using standardized terminology.
    required: false
    examples:
      - value: "INVERSION"
        description: "Chromosomal inversion breakpoint"

  # SuppressedRegion slots
  cytological_location:
    domain: SuppressedRegion
    range: string
    description: >-
      Cytological range where recombination is suppressed.
    pattern: "^[0-9XY]+[LR]?:[0-9]+[A-Z](?:\\.[0-9]+)?-[0-9]+[A-Z](?:\\.[0-9]+)?$"
    required: false
    examples:
      - value: "3L:61A1-84F3"
        description: "Suppressed region on chromosome 3L"

  suppression_efficiency:
    domain: SuppressedRegion
    range: SuppressionEnum
    description: >-
      Efficiency of recombination suppression in this region.
    required: false
    examples:
      - value: "COMPLETE"
        description: "100% recombination suppression"

  # Compatibility slots
  carried_alleles:
    domain: BalancerChromosome
    range: uriorcurie
    description: >-
      Marker alleles carried by this balancer chromosome for
      genetic selection purposes. References to prevent recursion.
    multivalued: true
    required: false
    examples:
      - value: "FB:FBal0000583"
        description: "AntpHu allele carried by TM6B balancer"

  balancer_utility:
    domain: BalancerChromosome
    range: BalancerUtilityEnum
    description: >-
      Primary genetic utility of this balancer chromosome.
    multivalued: false
    required: false
    examples:
      - value: "suppressor_of_crossing_over"
        description: "TM6B suppresses recombination"

classes:
  BalancerChromosome:
    is_a: GenomicEntity
    description: >-
      Chromosomal balancer entity with enhanced biological modeling
      for chromosome-level rearrangements.
    slots:
      - id
      - represents_allele
      - chromosome
      - has_breakpoints
      - suppressed_regions
      - homozygous_viability
      - viability_condition
      - balancer_status
      - carried_alleles
      - balancer_utility
    slot_usage:
      id:
        identifier: true
        id_prefixes: [FB]
        pattern: "^FBal[0-9]{8}$"
        required: true
    examples:
      - value: "FB:FBal0016059"
        description: "TM6B balancer chromosome"

  Breakpoint:
    is_a: InformationContentEntity
    description: >-
      Chromosomal breakpoint with coordinates and biological context.
    slots:
      - id
      - chromosome
      - cytological_band
      - orientation
      - breakpoint_type
    slot_usage:
      id:
        identifier: true
        id_prefixes: [FB]
        pattern: "^FBal[0-9]{8}_brk[0-9]+$"
        required: true
      chromosome:
        range: uriorcurie
        required: true
    examples:
      - value: "FB:FBal0016059_brk1"
        description: "First breakpoint of TM6B balancer"

  SuppressedRegion:
    is_a: InformationContentEntity
    description: >-
      Genomic region where recombination is suppressed by balancer.
    slots:
      - id
      - cytological_location
      - suppression_efficiency
    slot_usage:
      id:
        identifier: true
        id_prefixes: [FB]
        pattern: "^FBal[0-9]{8}_supp[0-9]+$"
        required: true
    examples:
      - value: "FB:FBal0016059_supp1"
        description: "Primary suppression region of TM6B"

enums:
  BalancerStatus:
    description: >-
      Balancer classification status for provenance tracking.
    permissible_values:
      BALANCER:
        description: "Confirmed balancer chromosome"
        meaning: "GENO:0000002"
      NOT_BALANCER:
        description: "Confirmed non-balancer"
      UNKNOWN:
        description: "Status not determined"

  OrientationEnum:
    description: >-
      Chromosomal orientation at breakpoint for inversion modeling.
    permissible_values:
      FORWARD:
        description: "Normal chromosomal orientation"
        meaning: "SO:0001879"
      REVERSE:
        description: "Inverted chromosomal orientation"  
        meaning: "SO:0001879"
      UNKNOWN:
        description: "Orientation not determined"

  BreakpointTypeEnum:
    description: >-
      Type of chromosomal rearrangement using standardized terminology.
    permissible_values:
      INVERSION:
        description: "Chromosomal inversion breakpoint"
        meaning: "SO:0001879"
      DELETION:
        description: "Chromosomal deletion breakpoint"
        meaning: "SO:0000159"
      DUPLICATION:
        description: "Chromosomal duplication breakpoint"
        meaning: "SO:1000035"
      TRANSLOCATION:
        description: "Chromosomal translocation breakpoint"
        meaning: "SO:0000199"

  ViabilityEnum:
    description: >-
      Homozygous viability status for stock center operations.
    permissible_values:
      LETHAL:
        description: "Lethal when homozygous"
        meaning: "PATO:0000718"
      VIABLE:
        description: "Viable when homozygous"
        meaning: "PATO:0000169"
      STERILE:
        description: "Sterile when homozygous"
        meaning: "PATO:0000618"
      CONDITIONAL:
        description: "Conditionally lethal/sterile"
        meaning: "PATO:0000718"

  SuppressionEnum:
    description: >-
      Recombination suppression efficiency in genomic regions.
    permissible_values:
      COMPLETE:
        description: "100% recombination suppression"
      PARTIAL:
        description: "Partial recombination suppression"
      VARIABLE:
        description: "Variable suppression efficiency"

  BalancerUtilityEnum:
    description: >-
      Primary genetic utility of balancer chromosomes.
    permissible_values:
      suppressor_of_crossing_over:
        description: >-
          Suppresses recombination in balanced chromosomal region.
        meaning: "SO:0001059"
      lethal_when_homozygous:
        description: >-
          Lethal in homozygous condition, maintains heterozygous state.
        meaning: "SO:0001773"
      visible_marker_carrier:
        description: >-
          Carries visible phenotypic markers for identification.
        meaning: "SO:0001060"
      multiple_inversion_complex:
        description: >-
          Contains multiple chromosomal inversions.
        meaning: "SO:1000037"