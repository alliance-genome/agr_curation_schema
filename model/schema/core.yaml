id: https://github.com/alliance-genome/agr_curation_schema/core.yaml
name: core
description: Alliance Schema with LinkML

default_prefix: alliance
default_range: string

default_curi_maps:
  - obo_context
  - idot_context
  - semweb_context
  - monarch_context

emit_prefixes:
  - rdf
  - rdfs
  - xsd

imports:
  - linkml:types
  - reference
  - resource
  - agent
  - image
  - ontologyTerm
  - controlledVocabulary

prefixes:
  alliance: 'http://alliancegenome.org/'
  linkml: 'https://w3id.org/linkml/'
  gff: 'https://w3id.org/gff'
  faldo: 'http://biohackathon.org/resource/faldo#'
  biolink: 'https://w3id.org/biolink/vocab/'
  NLMID: 'https://www.ncbi.nlm.nih.gov/nlmcatalog/?term='
  schema: 'http://schema.org/'
  dct: 'http://purl.org/dc/terms/'
  WIKIDATA_PROPERTY: 'https://www.wikidata.org/wiki/Property:'
  obograph: 'https://github.com/biodatamodels/obograph'

## ------------
## TYPES
## ------------

types:

  biological_sequence:
    typeof: string

## ------------
## CLASSES
## ------------


classes:

  AuditedObject:
    description: >-
      Base class for all other LinkML classes. Some entity for which changes are tracked,
      including date/time of change, the agent responsible for the change, and whether
      the entity is internal (private).
    slots:
      - created_by
      - date_created
      - updated_by
      - date_updated
      - db_date_created
      - db_date_updated
      - internal
      - obsolete

  BiologicalEntity:
    is_a: AuditedObject
    description: >-
      An entity of biological origin that can be unambiguously attributed to
      a single species.
    abstract: true
    slots:
      - curie
      - taxon
    slot_usage:
      taxon:
        required: true
      curie:
        required: true

  GenomicEntity:
    is_a: BiologicalEntity
    description: >-   # tentative
      An entity that is part of a genome (i.e. segment of the DNA molecule),
      is derived directly from the genome (i.e. RNA transcript molecule), or
      is derived indirectly from the genome (i.e. polypeptide or protein via
      RNA transcript translation).
    slots:
      - name
      - cross_references
      - secondary_identifiers
      - genomic_locations

  Transcript:
    is_a: GenomicEntity
    description: >-
      Placeholder.
    id_prefixes:
      - ENSEMBL
      - FB
      - WB
      - MGI
      - RGD
      - SGD
      - ZFIN

  CrossReference:
    is_a: AuditedObject
    slots:
      - curie
      - page_areas
      - display_name
      - prefix
    defining_slots:
      - curie
      - page_areas
    slot_usage:
      curie:
        required: true

  Synonym:
    description: >-
      Some symbol or name that is used to refer to an object. It can be the
      primary/current/accepted symbol/name, or an alias.
    is_a: AuditedObject
    slots:
      - synonym_type
      - format_text
      - display_text
      - synonym_url

  Note:
    is_a: AuditedObject
    description: >-
      Note object for capturing free-text describing some attribute of an entity,
      coupled with a 'note type', internal boolean, and an optional list of
      references. Permissible values for note_type can be viewed and managed in the
      A-Team curation UI Controlled Vocabulary Terms Table.
    slots:
      - free_text
      - note_type
      - evidence
    slot_usage:
      free_text:
        required: true
      note_type:           # Permissible values currently visible in A-Team curation UI CV table
        required: true
        examples:
          - value: disease_summary
          - value: disease_note
          - value: automated_gene_description
          - value: MOD_provided_gene_description
          - value: gene_disease_summary
          - value: gene_function_summary
          - value: gene_phenotype_summary

  SlotAnnotation:
    is_a: AuditedObject
    description: >-
      SlotAnnotation classes should be used when we need to attach metadata (in particular evidence and provenance)
      to a slot in the context of its referencing class, that can not be fully captured using an Association between
      the full class itself, and an InformationContentEntity. Evidence and provenance can exist here in the form of an
      evidence code, a publication, a personal communication or any other kind of InformationContentEntity.
      SlotAnnotation classes are used where the slot is not referencing a class in and of itself, and often has a 
      scalar range.
    notes: >-
      A good example of the use of a SlotAnnotation class is the use case of attributing one of many functional 
      impacts of an allele to a publication.  AlleleFunctionalImpact is the SlotAnnotation class that represents 
      this use case. 

  Association:
    is_a: AuditedObject
    description: >-
      A typed association between two entities, supported by evidence.  Associations have three base slots: subject, 
      object, and predicate, but they can have any number of additional attributes that help qualify the relationship 
      between the subject and the object.  The subject is the curie (or identifier) of the class that is the subject 
      of the association, and likewise the object is the curie (or identifier of the class that is the object. The 
      relationship between subject and object is defined by the predicate slot (which can also be constrained 
      using the range of the predicate).
    exact_mappings:
      - biolink:association
    notes:
      Keeping this more generic than biolink:association by foregoing the
      qualifiers and negated slots.
    slots:
      - subject
      - predicate
      - object
      - evidence
    slot_usage:
        subject:
            required: true
        predicate:
            required: true
        object:
            required: true

  EntitySynonym:
    is_a: Association
    description: >-
      A relationship between an entity and a synonym.
    slots:
      - evidence
      - synonym_scope
    slot_usage:
      object:
        range: Synonym
        required: True
      predicate:
        range: entity_synonym_type_enum
        required: True

  ExternalDatabaseLink:
    is_a: AuditedObject
    description: >-
      Base relation that holds the identifier prefix, base url and url suffix to help in generating
      URLs in crossReferences.
    slots:
      - dbkey
      - prefix
      - url_prefix
      - url_suffix
      - prefix_page
      - prefix_order

  Chromosome:
    is_a: AuditedObject
    description: The ID of the landmark used to establish the coordinate system for the current feature.
    slots:
      - curie
    slot_usage:
      curie:
        required: true

  Assembly:
    is_a: AuditedObject
    slots:
      - curie
    slot_usage:
      curie:
        required: true

  GenomicLocation:
    is_a: AuditedObject
    slots:
      - subject
      - predicate   # what should the predicate range be for this class? CG
      - object
      - has_assembly
      - start
      - end
    slot_usage:
      subject:
        range: GenomicEntity
        description: >-
          subject should be a genomic entity
      object:
        range: Chromosome
        description: >-
          object should be the chromosome identifier
    defining_slots:
      - subject
      - predicate
      - object
      - has_assembly
      - start
      - end

  Protein:
    is_a: GenomicEntity

  Identifier:
    slots:
      - counter
      - subdomain_code
      - subdomain_name
      - curie

  IdentifiersRange:
    slots:
      - first
      - last

## ------------
## SLOTS
## ------------



slots:

  start:
    description: The start of the feature in positive 1-based integer coordinates

  end:
    description: The end of the feature in positive 1-based integer coordinates

  has_assembly:
    domain: GenomicLocation
    required: true
    range: Assembly

  prefix:
    required: true
    multivalued: false
    description: >-
      Denormalization to help with classifying types of crossReferences,
      distinguishing DOIs from PMC ids, etc.

  page_areas:
    required: true
    multivalued: true
    range: string

  display_name:
    required: true
    multivalued: false
    range: string

  curator_comment:
    description: >-
      A publicly visible explanatory note from curators about some entity.
    range: string

  url_prefix:
    description: >-
      The prefix of the url before the accession number.

  url_suffix:
    description: >-
      The suffix of the url after the accession number.

  prefix_order:
    description: >-
      The relative order of the resource when listed with other crossReferences.

  prefix_page:
    description: >-
      The cateogry of pages the resource in the context of the URL associated with the crossReference
      provides.  Equivalent to the 'page' attribute in the Alliance resourceDescriptor file.

  private_comment:
    description: >-
      A private explanatory note from curators about some entity, for internal
      use only.
    range: string

  uncertain:
    description: >-
      If set to true, then the related entity is uncertain.
    range: boolean

  free_text:
    description: >-
      A free text string that describes some aspect of an entity.
    range: string

  note_type:
    description: >-
      The type of note: e.g., cytology, comment, summary. Permissible values for 'note_type' currently = disease_summary, disease_note
    range: VocabularyTerm

  internal:
    description: >-
      Classifies the entity as private (for internal use) or not (for public use).
    notes: >-
      Default value is true.
    range: boolean
    required: true

  related_notes:
    description: Holds between an object and a list of related Note objects.
    notes: >-
      The original name suggested for this slot was simply notes, but I think
      that label is reserved in LinkML for internal descriptions of objects,
      hence the related_notes label used here.
    range: Note
    multivalued: true

  related_note:
    description: Holds between an object and a Note object.
    notes: >-
      Singular version of related_notes
    range: Note
    multivalued: false

  generated_by:
    description: >-
      Holds between a material entity and an Agent that generated it:
      e.g., Thomas Blumenthal, Kornberg Laboratory.
    required: false
    multivalued: true
    range: Agent

  manufactured_by:
    description: >-
      Holds between a material entity and an Agent that has manufactured it:
      e.g., Molecular Probes.
    required: false
    multivalued: true
    range: Agent

  current:
    range: boolean

  curie:
    multivalued: false
    description: >-
      A unique identifier for a thing. Must be either a CURIE shorthand for a URI or a complete URI
    range: uriorcurie
    identifier: true

  unique_id:
    description: >-
      A non-curie unique identifier for a thing.
    multivalued: false
    range: string

  dbkey:
    description: >-
      Typically the primary key on the table.  Should be a global sequence in the database to insure
      uniqueness over the entire suite of tables.  Alternatively, could be a serial8 identifier.
      Tables with a dbkey should have an alternate key to establish uniqueness based on the data in the table.

  taxon:
    description: >-
      The taxon from which the biological entity derives.
    multivalued: false
    range: NCBITaxonTerm

  secondary_identifiers:
    aliases: ['secondary_ids']
    multivalued: true
    range: uriorcurie

  secondary_id:
    multivalued: false
    range: uriorcurie

  genomic_locations:
    domain: GenomicEntity
    range: GenomicLocation
    multivalued: true

  table_key:
    description: >-
      The primary key for a specific table entry, unique for that table.
    notes: >-
      For internal use.
    multivalued: false
    range: integer

  date_created:
    aliases: [ 'creation_date' ]
    description: >-
      The date on which an entity was created. This can be applied to nodes or edges.
    range: date
    exact_mappings:
      - dct:createdOn
      - WIKIDATA_PROPERTY:P577

  date_updated:
    aliases: ['date_last_modified']
    description: >-
      Date on which an entity was last modified.
    range: date

  db_date_created:
    description: >-
      The date on which an entity was created in the Alliance database.  This
      is disinct from date_created, which represents the date when the entity
      was originally created (i.e. at the MOD for imported data).
    range: date

  db_date_updated:
    description: >-
      Date on which an entity was last modified in the Alliance database.  This
      is disinct from date_updated, which represents the date when the entity
      was last modified and may predate import into the Alliance database.
    range: date

  created_by:
    description: >-
      The individual that created the entity.
    multivalued: false
    domain: AuditedObject
    range: Person

  updated_by:
    description: >-
      The individual that last modified the entity.
    multivalued: false
    domain: AuditedObject
    range: Person

  release:
    description: MOD release ID
    range: string

  data_provider:
    description: Organization (e.g. MOD) from which the data was sourced
    multivalued: false
    range: string

  secondary_data_provider:
    description: Organization (e.g. MOD) that provided the data directly to the Alliance, but not the original source
    multivalued: false
    range: string

  association_slot:
    abstract: true
    aliases: ['edge property', 'statement property']
    description: >-
      any slot that relates an association to another entity
    exact_mappings:
      - biolink:association_slot

  description:
    aliases: ['definition']
    description: >-
      a human-readable description of an entity

  name:
    description: >-
      a human-readable name for an entity
    multivalued: false
    range: string

  cross_references:
    singular_name: cross_reference
    aliases: ['xrefs']
    description: >-
      Holds between an object and its CrossReferences.
    multivalued: true
    range: CrossReference
    inlined: true
    inlined_as_list: true

  symbol:
    description: >-
      Symbol for a particular thing
    exact_mappings:
      - biolink:symbol

  negated:
    range: boolean
    description: if set to true, then the association is negated i.e. is not true

  qualifiers:
    singular_name: qualifier
    description: >-
      This is the MeSH qualifier term that is optionally added to the descriptor term.

  type:
    range: uriorcurie

  references:
    singular_name: reference
    description: holds between an object and a list of references
    multivalued: true
    range: Reference

  single_reference:
    description: holds between an object and a single reference
    multivalued: false
    range: Reference

  original_reference:
    is_a: references
    description: >-
      Holds between an entity and the first reference to describe that entity.
    multivalued: false
    range: Reference

  obsolete:
    description: >-
      Entity is no longer current.
    notes: >-
      Obsolete entities are preserved in the database for posterity but should
      not be publicly displayed.
    range: boolean

  abbreviation:
    multivalued: false
    range: string

  mod_entity_id:
    description: >-
      The model organism database (MOD) identifier/curie for the object
    range: string

  first_name:
    description: first name of a person
    range: string

  middle_name:
    description: middle names of a person
    range: string
    multivalued: false

  last_name:
    description: last (family) name of a person
    range: string

  evidence_codes:
    description: ECO term IDs             # this slot has also been instantiated in the orthology.yaml
    multivalued: true
    values_from:
      - ECO
    range: ECOTerm

  evidence_code:
    multivalued: false
    range: ECOTerm

  cron_schedule:
    description: A string describing the cron syntax for the schedule
    range: string

  schedule_active:
    description: This determines if the the schedule is active or not
    range: boolean

  counter:
    description: a number to identify an alliance resource in a subdomain
    range: integer

  subdomain_code:
    description: a three letter string, representing a subdomain (e.g 101 represents disease_annotation)
    range: string

  subdomain_name:
    description: subdomain name (e.g disease_annotation)
    range: string

  first:
    description: first identifier in a range
    range: Identifier

  last:
    description: last identifier in a range
    range: Identifier


  ## --------------------
## ASSOCIATION SLOTS
## --------------------

  subject:
    is_a: association_slot
    description: >-
      connects an association to the subject of the association.
      For example, in a gene-to-phenotype association, the gene is subject and phenotype is object.
    required: true
    exact_mappings:
      - owl:annotatedSource
      - biolink:subject

  object:
    is_a: association_slot
    description: >-
      connects an association to the object of the association.
      For example, in a gene-to-phenotype association, the gene is subject and phenotype is object.
    required: true
    exact_mappings:
      - biolink:object

  predicate:
    is_a: association_slot
    description: >-
      A high-level grouping for the relationship type. This is analogous to category for nodes.
      In RDF, this corresponds to rdf:predicate and in Neo4j this corresponds to the
      relationship type.
    required: true
    exact_mappings:
      - biolink:predicate

  format_text:
    description: >-
      A version of a synonym string using only ASCII characters, which is
      easier to type, print and parse. For example, Greek characters are
      transliterated; sub/superscript is somehow encoded with ASCII characters.
    aliases: ['synonym_text']
    domain: Synonym
    range: string
    required: true
    multivalued: false

  display_text:
    description: >-
      A version of a synonym string for display. Any UTF8 character is
      permitted.
    aliases: ['synonym_sgml']
    range: string
    required: true
    multivalued: false

  synonym_type:
    domain: Synonym
    range: synonym_type_enum
    multivalued: false
    required: true

  synonym_url:
    description: >-
      URL for a synonym: e.g., NCBI URL for some NCBI synonym of an object.
    domain: Synonym
    range: uri

  synonym_scope:
    description: >-
      The scope of a synonym in relation to an entity: e.g. exact, narrow, etc.
    domain: EntitySynonym
    range: synonym_scope_enum

## ----------
## PREDICATES
## ----------

  related_to:                         # should this be generalized in core.yaml?
    description: >-
      A relationship that is asserted between two named things.
    multivalued: true
    inherited: true
    symmetric: true

enums:

  synonym_type_enum:
    permissible_values:
      symbol:
        description: >-
          A short string representing an entity, usually an abbreviation.
        notes: >-
          SGD: gene_name (e.g., ABC1)
          WB: Public_name (e.g., abu-9)
          FB: symbol (e.g., wg)
          ZFIN: Symbol (e.g., pax6a)
          MGI: Symbol (e.g., Ace)
          RGD: (e.g., Abat)
      full_name:
        description: >-
          The entity's full-length name.
        notes: >-
          If this is implemented, the current name slot might be supplanted by Synonyms of type name.
          SGD: name description
          WB:
          FB: fullname (e.g., wingless)
          ZFIN: name (e.g., paired box 6a)
          MGI: Name (e.g., angiotensin I converting enzyme (peptidyl-dipeptidase A) 1)
          RGD: Name (e.g., 4-aminobutyrate aminotransferase)
      systematic_name:
        notes: >-
          It seems like a few MODS have systematic names, perhaps coming from
          the early days of full genome sequencing.
          Do we want to group them into one type?
          SGD: systematic_name (e.g., YHR084W)
          WB: Sequence_name (e.g., R09F10.2)
          FB: Annotation symbol (e.g., CG4889)
      # Other SGD alias types: distinct from above types?
      ncbi_protein_name:
        notes: >-
          Synonyms developed by SGD and NCBI curators for proteins, conforming
          to UniProt and NCBI rules. They are displayed on protein pages, and
          used for naming of fungal orthologs.
      uniform:
        notes: SGD-specific
      non_uniform:
        notes: SGD-specific
      retired_name:
        notes: >-
          SGD-specific. Synonyms that were once reserved but have been abandoned for a year or more.

  synonym_scope_enum:
    permissible_values:
      exact:
      narrow:
      broad:
      related:

  entity_synonym_type_enum:
    permissible_values:
      current:
        description: >-
          The synonym is an officially accepted synonym for an entity.
          An entity should have only one current synonym of a give type.
          For example, only one current symbol and one current full name.
      alias:
        description: >-
          The synonym is an alternate symbol or name for the entity. It is not
          the currently preferred symbol/name for the entity.
