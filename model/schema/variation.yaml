id: https://github.com/alliance-genome/agr_curation_schema/src/schema/variation
name: Alliance-Schema-Prototype-Variation
title: Alliance Schema Prototype Variation

imports:
  - core
  - allele
  - linkml:types
  - informationContentEntity
  - ontologyTerm

prefixes:
  alliance: 'http://alliancegenome.org'
  linkml: 'https://w3id.org/linkml/'
  gff: 'https://w3id.org/gff'
  faldo: 'http://biohackathon.org/resource/faldo#'
  biolink: 'https://w3id.org/biolink/vocab/'
  NLMID: 'https://www.ncbi.nlm.nih.gov/nlmcatalog/?term='
  schema: 'http://schema.org/'

# Classes

classes:

  Variant:
    is_a: GenomicEntity
    description: >-
      A DNA, RNA or protein/polypeptide sequence that differs relative to a
      designated reference sequence.  The sequence occurs at a single
      position or in a range of contiguous nucleotides or amino acids.
    slots:
      - variant_type
      - references
      - related_notes
      - source_general_consequence
      - evidence_code
      - variant_locations
    exact_mappings:
      - SO:0001059

  VariantLocation:
    abstract: true
    description: >-
      Base class linking a variant to a position on a genomic entity and the resulting consequence to the sequence
      and/or function of that genomic entity. Slots are provided for data taken from a source publication or data
      load and for data resulting from manual curation. Where the values are the same, the curator has confirmed
      the information from the source.  In other cases, the curator's analysis has resulted in different values,
      for instance, if the assembly is different, the source did not specify the transcript or protein isoform,
      the definition of the transcript or protein isoform used by the source has changed, or if there was an error
      in the source data.
    slots:
      - evidence_code
      - hgvs
      - source_start_position
      - curated_start_position
      - source_end_position
      - curated_end_position
      - source_reference_sequence
      - curated_reference_sequence
      - source_variant_sequence
      - curated_variant_sequence
      - source_consequence
      - curated_consequence
    slot_usage:
      evidence_code:
        required: false

  VariantGenomeLocation:
    is_a: VariantLocation
    description: >-
      Links a variant to a genomic position and the resulting consequence to the sequence and/or function.
      In practice, functional consequences for variants which overlap genes are not generally provided at the
      genome level but rather are calculated and annotated relative to a specific transcript or protein isoform.
    slots:
      - source_assembly
      - curated_assembly
      - source_chromosome
      - curated_chromosome

  VariantTranscriptLocation:
    is_a: VariantLocation
    description: >-
      Links a variant to a position on a specified transcript and the resulting consequence to the sequence and/or
      function of that transcript.
    slots:
      - source_transcript
      - curated_transcript

  VariantPolypeptideLocation:
    is_a: VariantLocation
    description: >-
      Links a variant to a position on a specified polypeptide and the resulting consequence to the sequence and/or
      function of that polypeptide.
    slots:
      - source_polypeptide
      - curated_polypeptide
      - source_associated_transcripts
      - curated_associated_transcripts

# Slots

slots:

  variant_type:
    description: >-
      SOTerm describing the type of variant. In practice, variant type will be limited to a subset of the SO specified
      in an Alliance controlled vocabulary in order to maintain consistency.
    required: true
    multivalued: false
    domain: Variant
    range: SOTerm

  source_general_consequence:
    description: >-
      SOTerm (child of SO:0001576 - transcript_variant) that describes the
      consequence of the variant, as stated in the source reference when no
      transcript ID is provided. Since a curator would determine variant location and consequences relative to at
      least one specific genome assembly, transcript and/or polypeptide, no slot for curated general consequence
      is provided.
    required: false
    multivalued: false
    domain: Variant
    range: SOTerm

  source_consequence:
    description: >-
      SOTerm (child of SO:0001576 - transcript_variant) that describes the
      consequence of the variant, as stated in the source reference. In practice source consequence will be
      associated with locations at any or all of VariantGenomeLocation, VariantTranscriptLocation, and
      VariantPolypeptideLocation.
    required: false
    multivalued: false
    domain: VariantLocation
    range: SOTerm

  curated_consequence:
    description: >-
      SOTerm that describes the consequence of the variant, as determined by
      the curator. In practice curated consequence will be associated with locations at any or all of
      VariantGenomeLocation, VariantTranscriptLocation, and VariantPolypeptideLocation.
    required: false
    multivalued: false
    domain: VariantLocation
    range: SOTerm

  variant_locations:
    description: >-
      Location of the variant within genomic entities. Variant_locations can include any or all of: one
      VariantGenomeLocation stanza, one or more VariantTranscriptLocation stanzas and/or one or more
      VariantPolypeptideLocation stanzas.
    required: true
    multivalued: true
    domain: Variant
    range: VariantLocation

  hgvs:
    description: >-
      HGVS nomenclature for variant located on a genomic entity. In practice HGVS nomenclature will be derived
      for any or all of VariantGenomeLocation, VariantTranscriptLocation, and VariantPolypeptideLocation.
    required: true
    domain: VariantLocation
    range: string

  # May want to remove domain of following 8 slots and move them to core
  # so that they can be used for alignment of other genomic entities
  source_assembly:
    description: >-
      Assembly to which variant is aligned as specified at source.
    multivalued: false
    required: false
    domain: VariantLocation
    range: Assembly

  curated_assembly:
    description: >-
      Assembly to which variant is aligned as specified by curator.
    multivalued: false
    required: true
    domain: VariantLocation
    range: Assembly

  source_chromosome:
    description: >-
      Chromosome to which variant is aligned as specified at source.
    multivalued: false
    required: false
    domain: VariantLocation
    range: Chromosome

  curated_chromosome:
    description: >-
      Chromosome to which variant is aligned as specified by curator.
    multivalued: false
    required: true
    domain: VariantLocation
    range: Chromosome

  source_start_position:
    description: >-
      Start position of variant on genomic entity as specified at source.
    multivalued: false
    required: false
    domain: VariantLocation
    range: integer

  curated_start_position:
    description: >-
      Start position of variant on genomic entity as specified at source.
    multivalued: false
    required: true
    domain: VariantLocation
    range: integer

  source_end_position:
    description: >-
      End position of variant on genomic entity as specified at source.
    multivalued: false
    required: false
    domain: VariantLocation
    range: integer

  curated_end_position:
    description: >-
      End position of variant on genomic entity as specified at source.
    multivalued: false
    required: true
    domain: VariantLocation
    range: integer

  source_reference_sequence:
    description: >-
      Reference sequence of genome or genomic entity at position of aligned
      variant, as specified at source.
    multivalued: false
    required: false
    domain: VariantLocation
    range: biological_sequence

  curated_reference_sequence:
    description: >-
      Reference sequence of genome or genomic entity at position of aligned
      variant, as specified by curator.
    multivalued: false
    required: false
    domain: VariantLocation
    range: biological_sequence

  source_variant_sequence:
    description: >-
      Sequence that differs from the reference sequence of genome or genomic entity at position of variant,
      as specified at source.
    multivalued: false
    required: false
    domain: VariantLocation
    range: biological_sequence

  curated_variant_sequence:
    description: >-
      Sequence that differs from the reference sequence of genome or genomic entity at position of variant,
      as specified by curator.
    multivalued: false
    required: false
    domain: VariantLocation
    range: biological_sequence

  source_transcript:
    description: >-
      Transcript associated with variant and for which a specific location and consequence of that variant
      is provided, as specified at source.  Multivalued=false for this slot because although a variant can have
      multiple VariantTranscriptLocation stanzas, each stanza will have one and only one source transcript ID.
    required: false
    multivalued: false
    domain: VariantTranscriptLocation
    range: Transcript

  curated_transcript:
    description: >-
      Transcript associated with variant and for which a specific location and consequence of that variant is
      provided, as specified by curator. Multivalued=false for this slot because although a variant can have
      multiple VariantTranscriptLocation stanzas, each stanza will have one and only one curated transcript ID.
    required: true
    multivalued: false
    domain: VariantTranscriptLocation
    range: Transcript

  source_polypeptide:
    description: >-
      Polypeptide associated with variant and for which a specific location and consequence of that variant
      is provided, as specified at source. Multivalued=false for this slot because although a variant can have
      multiple VariantPolypeptideLocation stanzas, each stanza will have one and only one source polypeptide ID.
    required: false
    multivalued: false
    domain: VariantPolypeptideLocation
    range: Protein # Do we need to distinguish polypeptide from protein?

  curated_polypeptide:
    description: >-
      Polypeptide associated with variant and for which a specific location and consequence of that variant
      is provided, as specified by curator. Multivalued=false for this slot because although a variant can
      have multiple VariantPolypeptideLocation stanzas, each stanza will have one and only one curated polypeptide ID.
    required: true
    multivalued: false
    domain: VariantPolypeptideLocation
    range: Protein # Do we need to distinguish polypeptide from protein?

  source_associated_transcripts:
    description:
      Transcript(s) associated with polypeptide to which variant is aligned,
      as specified at source. Multivalued=true for this slot because a single polypeptide can be associated
      with (i.e., translated from) more than one transcript.
    required: false
    multivalued: true
    domain: VariantPolypeptideLocation
    range: Transcript

  curated_associated_transcripts:
    description:
      Transcript(s) associated with polypeptide to which variant is aligned,
      as specified by curator. Multivalued=true for this slot because a single polypeptide can be associated
      with (i.e., translated from) more than one transcript.
    required: false
    multivalued: true
    domain: VariantPolypeptideLocation
    range: Transcript
